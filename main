local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

local toolNames = {
    ["Clockwork Hammer"] = Enum.KeyCode.R,
    ["Scarletsteel Pickaxe"] = Enum.KeyCode.T,
    ["Steel Axe"] = Enum.KeyCode.Y,
    ["Steel Shovel"] = Enum.KeyCode.F,
    ["Pruning Shears"] = Enum.KeyCode.G,
}

-- Keep track of which tools have the loop enabled
local loopEnabledForTool = {}

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "ToolLoopStatusGui"
screenGui.Parent = PlayerGui

-- Create a frame to hold all labels
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 200, 0, #toolNames * 25 + 10)
frame.Position = UDim2.new(0, 10, 0, 10)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BorderSizePixel = 0
frame.Parent = screenGui

-- Add a UIListLayout to arrange labels vertically
local listLayout = Instance.new("UIListLayout")
listLayout.Parent = frame
listLayout.SortOrder = Enum.SortOrder.LayoutOrder
listLayout.Padding = UDim.new(0, 5)

-- Create label for each tool to display status
local statusLabels = {}
for toolName, keyCode in pairs(toolNames) do
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 0, 20)
    label.BackgroundTransparency = 1
    label.TextColor3 = Color3.fromRGB(200, 200, 200)
    label.Font = Enum.Font.SourceSans
    label.TextSize = 18
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Text = toolName .. ": OFF"
    label.Parent = frame

    statusLabels[toolName] = label
    loopEnabledForTool[toolName] = false
end

-- Function to toggle a specific tool's loop
local function ToggleLoopForTool(toolName)
    loopEnabledForTool[toolName] = not loopEnabledForTool[toolName]
    statusLabels[toolName].Text = toolName .. ": " .. (loopEnabledForTool[toolName] and "ON" or "OFF")
end

-- Input listener to toggle the loops
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    for toolName, keyCode in pairs(toolNames) do
        if input.KeyCode == keyCode then
            ToggleLoopForTool(toolName)
            print("Loop for", toolName, "toggled", loopEnabledForTool[toolName] and "on" or "off")
        end
    end
end)

-- Main loop to fire remote events for enabled tools
spawn(function()
    while true do
        for toolName, enabled in pairs(loopEnabledForTool) do
            if enabled then
                local tool = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild(toolName)
                if tool then
                    local args = {
                        [1] = tool,
                        [2] = false
                    }
                    workspace.Remotes.UseItem:FireServer(unpack(args))
                end
            end
        end
        wait(0.1)
    end
end)
